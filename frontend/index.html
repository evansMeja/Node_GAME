<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/bootstrap.min.css">
    <title>Simple Game</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#"> Crime Zero Inc.</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
          </li>
        </ul>
        <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link display_instructions" href="#">Game Instructions</a>
        </li>
      </ul>
      </div>
    </nav>
   

    <div class="row my-4">
      <div class="col-8 col-md-5 col-xs-8 col-sm-8 mx-auto mx-md-auto mx-xs-auto mx-sm-auto">
        <div class="row">

          <div class="col-12 col-md-12 col-xs-12 col-sm-12 border text-center">
            <div class="mobile-phone bg-white p-2">
              Game
            </div>
          </div>

          <div class="col-12 col-md-12 col-xs-12 col-sm-12 border text-center">
            <div class="mobile-phone bg-white p-2 display">
              --
            </div>
          </div>

          <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
            <div class="mobile-phone bg-white p-2 font-weight-bold">
              1
            </div>
            <div class="symbols bg-whitep-2">
              @.?
            </div>
          </div>
          <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
            <div class="mobile-phone bg-white p-2 font-weight-bold">
              2
            </div>
            <div class="symbols bg-whitep-2">
              ABC
            </div>
          </div>
          <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
            <div class="mobile-phone bg-white p-2 font-weight-bold">
              3
            </div>
            <div class="symbols bg-whitep-2">
              DEF
            </div>
          </div>
        </div>

          <div class="row">
            <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
              <div class="mobile-phone bg-white p-2 font-weight-bold">
                4
              </div>
              <div class="symbols bg-whitep-2">
                GHI
              </div>
            </div>
            <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
              <div class="mobile-phone bg-white p-2 font-weight-bold">
                5
              </div>
              <div class="symbols bg-whitep-2">
                JKL
              </div>
            </div>
            <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
              <div class="mobile-phone bg-white p-2 font-weight-bold">
                6
              </div>
              <div class="symbols bg-whitep-2">
                MNO
              </div>
            </div>
          </div>

            <div class="row">
              <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
                <div class="mobile-phone bg-white p-2 font-weight-bold">
                  7
                </div>
                <div class="symbols bg-whitep-2">
                  PQRS
                </div>
              </div>
              <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
                <div class="mobile-phone bg-white p-2  font-weight-bold">
                  8
                </div>
                <div class="symbols bg-whitep-2">
                  TUV
                </div>
              </div>
              <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
                <div class="mobile-phone bg-white p-2 h5 font-weight-bold">
                  9
                </div>
                <div class="symbols bg-whitep-2">
                  WXYZ
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
                <div class="mobile-phone bg-white p-2 font-weight-bold">
                  *
                </div>
                <div class="symbols bg-whitep-2">
                  SEND
                </div>
              </div>
              <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
                <div class="mobile-phone bg-white p-2 font-weight-bold">
                  0
                </div>
                <div class="symbols bg-whitep-2">
                  ZERO
                </div>
              </div>
              <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_scene">
                <div class="mobile-phone bg-white p-2 font-weight-bold">
                  #
                </div>
                <div class="symbols bg-whitep-2">
                  SPACE
                </div>
              </div>
              </div>


              <div class="row">
                <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_clear">
                  <div class="mobile-phone bg-white h5 font-weight-bold">
                    
                  </div>
                  <div class="symbols bg-whitep-2 p-2">
                    NEXT
                  </div>
                </div>
                <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center ">
                  <div class="mobile-phone bg-white p-2 font-weight-bold">
                    
                  </div>
                  <div class="symbols bg-whitep-2">
                    -
                  </div>
                </div>
                <div class="col-4 col-md-4 col-xs-4 col-sm-4 border text-center btn_clear">
                  <div class="mobile-phone bg-white  h5 font-weight-bold">
                   
                  </div>
                  <div class="symbols bg-whitep-2 p-2">
                    CLEAR
                  </div>
                </div>
                </div>

                <div class="row">
                  <div class="col-12 col-md-12 col-xs-12 col-sm-12 border text-center btn_next">
                    <div class="mobile-phone bg-white h5 font-weight-bold">
                      
                    </div>
                    <div class="symbols bg-whitep-2 p-2 result">
                      
                    </div>
                  </div>
                </div>
  

        </div>
      </div>
    </div>


    <!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Read the SMS Service Instructions Carefully</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        The time is set in a dystopian future when crime is a global issue. Crime Zero Inc. sets up a SMS
        service where you type in 0 <code>space</code> <code>code</code> to call for a super hero for rescue. You are assigned
        the job of developing a system that reads this code and translates into possible names of super
        heroes so that Crime Zero Inc. can send a distress signal to alarm your savior.
        The program should map the standard telephone keypad numbers to corresponding letters with the
        given set of super hero names. 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">I have Read</button>
      </div>
    </div>
  </div>
</div>



    <script src="assets/jquery-3.5.1.min.js"></script>
    <script src="assets/popper.min.js"></script>
    <script src="assets/bootstrap.min.js"></script>

    <!-- custom javascript for our project -->
    <script>
      // peform a little validation user input

      

      function resetDisplay(myArrayObj){
        $(".display").text("--");
        myArrayObj = [];
      }

    


      function displayInstructions(){
        $('#exampleModalLong').modal('show');
      }

      function isValidInput(userInput,myArrayObj){
        var originalText ="";
        console.log(myArrayObj.length);
        userInput = userInput.trim();
        if(userInput == "*"){
          console.log(myArrayObj);
          if(
          myArrayObj[0] == "0" && 
          myArrayObj[1] == "#" &&
          myArrayObj.length > 2
          ){
            console.log(myArrayObj);
            $.ajax({
              type: "POST",
              url: "http://127.0.0.1:3000",
              crossDomain:true, 
              dataType: "json",
              data:JSON.stringify({dial_code: myArrayObj})
              }).done(function ( data ) {
                code="";
                for(var i=2;i<myArrayObj.length;i++){
                  code = code + myArrayObj[i];
                }
                msg = code+" : "+data.msg
                $(".result").append('<p>'+msg+'</p>');
            })
            return true;
          }else{
            return false;
          }
      }

        if(userInput == "#"){
          myArrayObj.push("#");
          originalText = $(".display").text();
          $(".display").text(originalText+"#");
          return true;
        }

        myArrayObj.push(userInput);
        originalText = $(".display").text();
        if(originalText.trim() == "--"){
          $(".display").text(userInput);
          return true;
        }
        $(".display").text(originalText+userInput);
        return true;

      }



      // little Animation on mouse enter and leave
     

      $(function() {
        $(".display_instructions").click(function(){
          displayInstructions();
        });

        var myArrayObj = new Array();
        $('.btn_scene').hover(function() {
          $(this).css("opacity",".3");
        }, function() {
          $(this).css("opacity","1");
        });

        $('.btn_scene').click(function(){
          var userInput = $(':nth-child(1)', this).text();
          if (!isValidInput(userInput,myArrayObj)){
            resetDisplay(myArrayObj);
          }
          
        });
        $(".btn_clear").click(function(){
          resetDisplay(myArrayObj);
        });
      });
    </script>
  </body>
</html>